<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

  <head>
  	<meta charset="UTF-8">
    <title>Sweet Control</title>
  </head>

  <body>
  
    <h1>Sweet Control</h1>
    <h3>Cooked Recipes List:</h3>
    
    <ol>
    <li th:each="cookedRecipe : ${cookedRecipeList.getPageList()}">
		<span th:text="${cookedRecipe.recipeEntry.name}">Name</span>
        <span th:text="${cookedRecipe.recipeEntry.description}">Description</span>
        <span th:text="${cookedRecipe.makingDate}">Making Date</span>
        <span th:text="${cookedRecipe.recipeEntryTotalCost}">Total Cost</span>
        <a th:href="@{/cookedrecipes/revert/{cookedRecipeId}(cookedRecipeId=${cookedRecipe.id})}">Revert</a>
        <a th:href="@{/cookedrecipes/detail/{cookedRecipeId}(cookedRecipeId=${cookedRecipe.id})}">Details</a>
        <a th:href="@{/cookedrecipes/delete/{cookedRecipeId}(cookedRecipeId=${cookedRecipe.id})}">Delete</a>
	</li>
	</ol>
	
	<span th:if="${!cookedRecipeList.isFirstPage()}">
         <a th:href="@{/cookedrecipes(page=${cookedRecipeList.getPage()-1}, idFilter=${idFilter}, nameLike=${nameLike}, idIngredientFilter=${idIngredientFilter})}">Previous</a>
	</span>
     
 
 	<span th:if="${cookedRecipeList.getPageCount() > 1}">
	    <th:block th:each="i: ${#numbers.sequence(0, cookedRecipeList.getPageCount() - 1)}"> 
	            <a th:href="@{/cookedrecipes(page=${i}, idFilter=${idFilter}, nameLike=${nameLike}, idIngredientFilter=${idIngredientFilter})}">[[ ${i} + 1 ]]</a>
	    </th:block>
	</span>
    
    <span th:if="${!cookedRecipeList.isLastPage()}">
         <a th:href="@{/cookedrecipes(page=${cookedRecipeList.getPage()+1}, idFilter=${idFilter}, nameLike=${nameLike}, idIngredientFilter=${idIngredientFilter})}">Next</a>
     </span>
    
    <form method="GET" th:action ="@{/cookedrecipes}" id="filterList">
      <h5>Filter Results</h5>

      <label for="filterByRecipeId">Id: </label>
      <input type="text" name ="idFilter" th:value="${idFilter}">
      
      <label for="filterByRecipeName">Name: </label>
      <input type="text" name ="nameLike" th:value="${nameLike}"> 
      
      <label for="filterByIngredient">Ingrediente: </label>
	<select id="filterByIngredient" th:name="idIngredientFilter">
    	<option value="">-- Ingredient --</option>
		<option th:each = "i : ${ingredientList}" th:value="${i.id}" th:text="${i.name}"></option>
	</select>
	
      <br/>
      <br/>
      <input type="submit" value="Filter Results"/>
    </form>
    
    <a th:href="@{/cookedrecipes}">Clear Filter</a>
    <br/>
    <br/>
    
    <a th:href="@{/recipes}">View Recipes</a>
    <br/>
    <a th:href="@{/}">Home</a>
  
  </body>
</html>